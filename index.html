<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous"
    />
  </head>
  <style>
    canvas {
      max-width: 400px;
      width: 80%;
      height: calc(80vw * 1206 / 820);
    }
  </style>
  <body>
    <div class="row justify-content-center mt-5">
      <h2>อยากให้พี่เกียบอกว่าอะไร</h2>
    </div>
    <div class="row justify-content-center">
      <input
        style="max-width: 400px; width: 80%;"
        class="form-control mb-2"
        type="text"
        id="gear-say"
        placeholder="พิมพ์เลย"
      />
    </div>
    <div class="d-flex justify-content-center">
      <canvas width="820" height="1206" id="gear"></canvas>
    </div>
    <div class="d-flex justify-content-center">
      <div>คลิกขวา > save image as ได้เลย!</div>
    </div>
  </body>
  <script>
    window.onload = function () {
      let c = document.getElementById("gear");
      let context = c.getContext("2d");
      const reload = function (text) {
        base_image = new Image();
        base_image.src = "gear.png";
        base_image.onload = function () {
          context.save();
          context.drawImage(base_image, 0, 0, 820, 1206);
          context.rotate(-Math.PI / 110);
          context.font = "45px Arial";
          context.fillStyle = "white";
          context.fillText(text, 330, 580);

          context.restore();
        };
      };
      reload("");
      const gearSay = document.getElementById("gear-say");
      gearSay.onkeyup = function (d) {
        reload(gearSay.value);
      };
    };
  </script>
</html>
